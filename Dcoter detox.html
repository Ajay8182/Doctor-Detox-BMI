<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doctor Detox BMI & Plan Suggestion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
    .container { max-width: 650px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h2 { text-align: center; margin-bottom: 20px; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input, select, button { width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    select[multiple] { height: 120px; }
    .flex-row { display: flex; gap: 8px; }
    .flex-row input { flex: 1; }
    button { background: #28a745; color: #fff; border: none; cursor: pointer; font-size: 16px; }
    button.clear { background: #dc3545; margin-top: 8px; }
    button.whatsapp { background: #25D366; margin-top: 8px; }
    .result { margin-top: 20px; line-height: 1.8; font-size: 16px; }
    .highlight { color: #007bff; font-weight: bold; }
    hr { margin: 15px 0; }
    .benefit-box, .fail-box, .advantage-box { border-radius: 6px; padding: 12px; margin: 12px 0; font-size: 16px; line-height: 1.8; }
    .benefit-box { border: 1px solid #b7e4c7; background: #e9f7ef; }
    .benefit-title { background: #34c759; color: #fff; padding: 6px 10px; border-radius: 4px; font-weight: bold; margin-bottom: 6px; }
    .fail-box { border: 1px solid #f5c2c7; background: #fbeaea; }
    .fail-title { background: #dc3545; color: #fff; padding: 6px 10px; border-radius: 4px; font-weight: bold; margin-bottom: 6px; }
    .usp-box { background: #f0f8ff; border: 1px solid #007bff; padding: 12px; margin-top: 15px; border-radius: 6px; }
    .usp-title { background: #007bff; color: #fff; padding: 6px 10px; border-radius: 4px; font-weight: bold; margin-bottom: 6px; display: inline-block; }
  </style>
</head>
<body>
<div class="container" id="formSection">
  <h2>Doctor Detox BMI & Plan Suggestion</h2>
  <label>Sales Advisor</label>
  <select id="salesAdvisor">
    <option value="">Select Advisor</option>
    <option value="+917573022404">Sales26</option>
    <option value="+917573022427">Sales27</option>
    <option value="+917573022428">Sales28</option>
    <option value="+917573022429">Sales29</option>
    <option value="+917573022430">Sales30</option>
    <option value="+917573022431">Sales31</option>
    <option value="+917573022432">Sales32</option>
  </select>
  <label>Gender</label>
  <select id="gender" onchange="filterHealth()">
    <option value="">Select Gender</option>
    <option value="female">Female</option>
    <option value="male">Male</option>
  </select>
  <label>Full Name</label>
  <input type="text" id="name">
  <label>Mobile Number</label>
  <input type="tel" id="mobile">
  <label>Age (years)</label>
  <input type="number" id="age">
  <label>Weight (kg)</label>
  <input type="number" id="weight">
  <label>Height</label>
  <select id="heightType" onchange="toggleHeight()">
    <option value="ft" selected>Feet & Inches</option>
    <option value="cm">Centimeters</option>
  </select>
  <div id="ftInputs" class="flex-row">
    <input type="number" id="heightFt" placeholder="Feet">
    <input type="number" id="heightIn" placeholder="Inches">
  </div>
  <div id="cmInputs" style="display:none;">
    <input type="number" id="heightCm" placeholder="Centimeters">
  </div>
  <label>Health Issues (multiple)</label>
  <select id="healthIssues" multiple>
    <option>PCOD / PCOS</option>
    <option>Thyroid</option>
    <option>Diabetes</option>
    <option>Period Irregularity</option>
    <option>Menopause</option>
    <option>High BP</option>
    <option>High Cholesterol</option>
    <option>Fatty Liver</option>
    <option>Migraine</option>
    <option>Back Pain</option>
    <option>Knee Pain (Arthritis)</option>
    <option>Joint Pain</option>
    <option>Uric Acid</option>
    <option>Fibroid</option>
    <option>Gas</option>
    <option>Acidity</option>
    <option>Constipation</option>
  </select>
  <label>Tried Anything Before? (multiple)</label>
  <select id="triedBefore" multiple>
    <option>Gym/Workout</option>
    <option>Keto Diet</option>
    <option>Intermittent Fasting</option>
    <option>Herbalife/Shakes</option>
    <option>Panchakarma</option>
    <option>Naturopathy</option>
    <option>HealthifyMe/Fitelo</option>
    <option>VLCC/Slimming Center</option>
    <option>Oziva</option>
    <option>Plix</option>
    <option>Other</option>
  </select>
  <button onclick="calculate()">Calculate & Suggest</button>
  <button class="clear" onclick="resetForm()">Clear Form</button>
</div>
<div class="container" id="resultSection" style="display:none;">
  <div id="result" class="result"></div>
  <button class="whatsapp" onclick="shareWhatsApp()">üì≤ Share via WhatsApp</button>
  <button class="clear" onclick="newForm()">üìù Fill New Form</button>
</div>
<script>
  const sheetURL = "https://script.google.com/macros/s/AKfycby2xfglNxCKX2mFhjiQ8mtDnLkOTsSWAtdlpoyiiQJag30U9UjEFvVErfvNgJ4EYz_f/exec";

  const advisorNames = {
    "+917573022404": "NA",
    "+917573022427": "Varun",
    "+917573022428": "Rohit",
    "+917573022429": "Urmila",
    "+917573022430": "Raise",
    "+917573022431": "Chaitali",
    "+917573022432": "NA"
  };

  const uspText = `
  <div class="usp-box">
    <div class="usp-title">‚ú® Why Doctor Detox?</div>
    <ul>
      <li>‚úî 100% Ayurvedic Liver Detox</li>
      <li>‚úî Daily Client Manager Support</li>
      <li>‚úî up to 7‚Äì8 kg weight-loss/month</li>
      <li>‚úî Real Food Diet (No Fasting / No Exercise)</li>
    </ul>
  </div>`;

  // (benefitsMap, failMap, and other code remain unchanged...)

  // Filter, toggleHeight, getGreeting functions remain same

  let report = {};

  function calculate() {
    // (Previous validation code remains same...)
    // After BMI & program calculation:

    // ‚úÖ Append USP in result display
    document.getElementById('result').innerHTML = `
      <p><strong>BMI:</strong> ${bmi} (${category})</p>
      <p><strong>Ideal Weight:</strong> ${minW} ‚Äì ${maxW} kg</p>
      <p><strong>Timeline:</strong> ${months} months (up to 7‚Äì8 kg weight-loss/month)</p>
      <p><strong>Suggested Program:</strong> ${program}</p>
      <hr><h3>Benefits for You</h3>${benefitsHTML || '<p>No specific issues selected.</p>'}
      <hr><h3>Why Others Failed</h3>${failHTML || '<p>No previous methods selected.</p>'}
      ${uspText}
    `;

    // ‚úÖ Send to Google Sheets
    fetch(sheetURL, {
      method: "POST",
      body: new URLSearchParams({
        advisor: advisorNames[advisor],
        gender, name, mobile, age, weight,
        height: `${ft}'${inch}"`,
        bmi, category,
        ideal: `${minW}-${maxW}`,
        months,
        program,
        health: health.join(", "),
        tried: tried.join(", ")
      })
    });

    const greeting = getGreeting();
    const advisorName = advisorNames[advisor] || "Wellness Expert";

    // ‚úÖ WhatsApp message with USP
    report = {
      number: mobile.replace(/\s+/g, ''),
      msg: encodeURIComponent(
`${greeting} ${name}!

${advisorName !== "NA" ? "Wellness Expert " + advisorName : "Wellness Expert"} this side from Doctor Detox Wellness Pvt. Ltd. üë®‚Äç‚öïÔ∏è

Thank you so much for your valuable time on call today! üôè

Here‚Äôs your BMI Report:
üìä BMI: ${bmi} (${category})
‚úÖ Ideal Weight: ${minW} ‚Äì ${maxW} kg
‚è≥ Timeline: ${months} months (up to 7‚Äì8 kg weight-loss/month)
üí° Suggested Program: ${program}

‚ú® Why Doctor Detox?
‚úî 100% Ayurvedic Liver Detox
‚úî Daily Client Manager Support
‚úî up to 7‚Äì8 kg weight-loss/month
‚úî Real Food Diet (No Fasting / No Exercise)

Wishing you a healthy day ahead! üåøüíö`
      )
    };

    document.getElementById('formSection').style.display = 'none';
    document.getElementById('resultSection').style.display = 'block';
  }

  function shareWhatsApp() {
    if (!report.number) { alert('No report to share!'); return; }
    window.open(`https://wa.me/${report.number}?text=${report.msg}`, '_blank');
  }

  function resetForm() {
    document.querySelectorAll('#formSection input, #formSection select').forEach(e => e.value = '');
    document.getElementById('resultSection').style.display = 'none';
    document.getElementById('formSection').style.display = 'block';
  }

  function newForm() { resetForm(); }
</script>
</body>
</html>
